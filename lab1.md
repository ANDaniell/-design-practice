# Лабораторная работа №1 "Кинотеатр"

---

### МПО

---![Модель предметной области drawio](https://github.com/user-attachments/assets/50207062-bede-481e-a0b9-a743c7caec06)

#### Сущности
- Касса - Операционная точка для продажи билетов зрителям. Связана с сущностью "Билет", так как выдает билеты на основании данных о сеансах.
- Кинотеатр - Общая сущность, включающая все кинозалы и сотрудников. Связан с договорными отношениями с поставщиками фильмов. Предоставляет услуги зрителям.
- Фильм - Контент, предоставляемый поставщиком для показа в кинотеатре. Связан с сеансами, договорами с поставщиками и зрителями через билеты.
- Поставщик - Юридическое лицо, предоставляющее кинотеатру права на показ фильмов. Связан с договорами и фильмами.
- Договор - Юридическое соглашение между кинотеатром и поставщиком фильмов или между кинотеатром и сотрудником. Может включать условия по предоставлению фильмов, а также финансовые условия.
- Сотрудник - Работник кинотеатра, занимающийся различными операциями, например, кассир, администратор кинозала. Может быть связан с кассой, обслуживанием зрителей или управлением сеансами.
- Кинозал - Физическое помещение для проведения сеансов. Связан с сеансами и билетами (каждый билет привязан к определенному кинозалу).
- Сеанс - Время и дата показа конкретного фильма в конкретном кинозале.
- Билет - Документ или электронный код, подтверждающий право зрителя на просмотр сеанса. Связан с сеансом, кинозалом и зрителем.
- Зритель - Лицо, приобретающее билет и посещающее сеанс. Связан с кассой, билетами и фильмами.

#### Связи

### Диаграмма коммуникаций

![Диаграмма коммуникаций-Диаграмма коммуникаций покупка билета drawio](https://github.com/user-attachments/assets/fa28e21f-acdf-4e4a-8592-4eb94dba9da6)


1. Смотреть афишу - Зритель запрашивает текущие сеансы, которые предлагает кинотеатр.<br />
> Так как явно не известно какой афишей пользуется пользователь, мы указываем ее абстрактно без дополнительной спецификации. Пускай за словом афиша может скрываться как вывеска на входе, или электронный ресурс (возможно сторонний), или постер рядом с кассой, для нас все эти сценарии не будут иметь различий
1.1. Выбор фильма - Акторы: Зритель, Система кинотеатра. Описание: Зритель выбирает конкретный фильм из афиши.
2. Покупка билета - Зритель переходит к процессу покупки билета на выбранный фильм. <br />
2.1 Запрос на получение списка билетов - Акторы: Система кинотеатра, База данных (или субсистема билетов). Описание: Система кинотеатра запрашивает доступные билеты на выбранный сеанс.<br />
2.1.1 Проверка существования сеанса - Система кинотеатра отправляет запрос на проверку наличия сеанса. База данных возвращает статус: существует ли сеанс и сколько доступных билетов имеется.<br />
2.2 Передача списка доступных билетов - После проверки наличия сеанса система получает список всех доступных билетов на этот сеанс.<br />
2.3 Показ доступных билетов - Система кинотеатра отображает пользователю список доступных билетов на специальном интерфейсе (с указанием мест и стоимости).
3. Выбор и указание билетов - Зритель отправляет выбор мест в систему. Система принимает выбор и резервирует места для билетов.
4. Покупка (банковкая транзакция) - Акторы: Зритель, Платежная система, Система кинотеатра. Описание: Система кинотеатра отправляет запрос на оплату в платежную систему. Платежная система обрабатывает запрос.<br />
4.1 Проверка статуса операции - Платежная система проверяет статус операции и отправляет результат (оплата прошла успешно или нет) в систему кинотеатра.
5. Непосредственно продажа билета (или билетов) - Система кинотеатра фиксирует продажу билетов и отправляет их пользователю (например, по электронной почте или в личный кабинет). Пользователь получает подтверждение покупки с информацией о билетах.

---

### Диаграмма анализа
#### Основные компоненты:

    Актер (Actor) — это пользователь системы (например, зритель), который взаимодействует с системой кинотеатра для выбора фильма и покупки билета.

    Афиша — представляет собой элемент интерфейса системы, через который пользователь выбирает фильм для просмотра.

    Интерфейс взаимодействия кассы — система, через которую кассир или пользователь напрямую взаимодействует для выбора билетов, обработки транзакций и получения подтверждений.

    СУБД (Система управления базами данных) — отвечает за хранение информации о фильмах, сеансах и доступных билетах.

    База данных — хранит информацию о сеансах, доступных фильмах и билетах.

    Кассовая система — отвечает за выполнение транзакций и проверку их статуса.

    Модуль выдачи — отвечает за выдачу билетов после успешной оплаты.

#### Основные потоки взаимодействий:

    Выбор фильма:
        Пользователь выбирает фильм через афишу.
        Информация передается в интерфейс взаимодействия кассы для последующего запроса на доступные сеансы.

    Запрос сеансов фильма:
        Интерфейс кассы запрашивает доступные сеансы для выбранного фильма.
        Запрос поступает в СУБД, которая обращается к базе данных для проверки существования сеансов на указанный фильм.

    Проверка наличия сеансов:
        СУБД проверяет наличие фильмов и возвращает информацию об этом. Если сеансы существуют, то возвращается список билетов для выбора.

    Выбор билетов и запрос транзакции:
        Пользователь выбирает билет(ы) через интерфейс кассы, и система запускает процесс банковской транзакции.
        Кассовая система совершает банковскую транзакцию.

    Проверка статуса транзакции:
        Кассовая система проверяет статус операции.
        Если транзакция успешна, система возвращает сообщение об успешном завершении покупки и выдает билеты через модуль выдачи.
        В случае ошибки транзакции возвращается сообщение о неудаче.

    Выдача билетов:
        После успешной проверки транзакции билеты выдаются пользователю через модуль выдачи.

#### Разъяснение некоторых шагов:

    Запрос доступных билетов на сеанс: После того как система получает подтверждение наличия сеансов, она запрашивает билеты, доступные для покупки.
    Проверка статуса транзакции: Кассовая система выполняет проверку и в зависимости от статуса возвращает соответствующее сообщение (успех или ошибка).
    Изменение списка доступных билетов: После покупки билетов обновляется список доступных мест на сеанс.

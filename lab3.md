
![Диаграммы_вариантов_использования-Собственный кинотеатр drawio (3)](https://github.com/user-attachments/assets/a21ce526-290b-45cf-b8be-a351f84b0679)


> Функциональные требования для нашего кинотеатра: ознакомиться с афишей, изучить информацию о фильме, просмотреть сеансы, отфильтровать список из сеансов, выбрать доступное в кинозале место, купить билет. (Добавить ещё?)
> Соответственно, различие между нашим кинотеатром и сторонними двумя — в отсутствии более продвинутых функциональных требований (всё, кроме перечисленного в пункте 2).

# Описание Нашей модели кинотеатра

### Участники и их роли:

#### 1. **Администратор**

- Основная роль: управление системой.
- Возможные действия:
    - **«CRUD» сеанс**: Администратор может создавать, читать, обновлять и удалять данные о сеансах.
    - **«CRUD» фильм**: Управление информацией о фильмах, доступных в системе.
    - **«CRUD» сотрудник**: Работа с данными о сотрудниках системы.
    - **«CRUD» контракт** (включено в действия администратора): Управление контрактами (например, с дистрибьюторами фильмов).

#### 2. **Гость**

- Основная роль: пользователь, который взаимодействует с системой для выбора и покупки билетов.
- Возможные действия:
    - **Выбрать фильм**:
        - **Ознакомиться с информацией о фильме** (расширение): Пользователь может получить дополнительную информацию о фильме.
        - **Ознакомиться с информацией о сеансах** (расширение): После выбора фильма пользователь может изучить расписание доступных сеансов.
    - **Выбрать сеанс** (включено в процесс покупки): Выбор конкретного сеанса фильма.
    - **Выбрать места** (включено в процесс покупки): Выбор конкретных мест в зале.
    - **Купить билет**:
        - **Купить очно** (вариант): Возможность купить билет в кассе.
        - **Купить онлайн** (вариант): Возможность приобрести билет через интернет.

---

### Связи между вариантами использования:

1. **Включение (includes)**:
    
    - Указывает на обязательные действия в рамках основного варианта использования. Например:
        - **Купить билет** включает **Выбрать сеанс** и **Выбрать места**, так как это необходимые шаги для покупки.
        - **CRUD фильм** включает **CRUD контракт**, так как информация о контракте может быть частью работы с фильмом.
2. **Расширение (extends)**:
    
    - Показывает дополнительные действия, которые пользователь может выполнить, если есть такая необходимость. Например:
        - **Выбрать фильм** может быть расширено действиями **Ознакомиться с информацией о фильме** и **Ознакомиться с информацией о сеансах**, если пользователь хочет узнать больше.

---


# СЦЕНАРИЙ

---

### Детали сценариев:

1. **Админ:**
    
    - Выполняет операции управления данными о фильмах и сеансах. Это необходимо для актуальности каталога фильмов и расписания.
2. **Гость:**
    
    - **Выбрать фильм**:  
        Гость может найти интересующий фильм и получить о нем информацию, включая доступные сеансы.
    - **Купить билет:**  
        Основной процесс, включающий:
        - Выбор сеанса и мест в зале.
        - Возможность завершить покупку онлайн или зарегистрировать покупку как оффлайн, если оплата будет произведена в кассе.

---

### Связи и зависимости:

1. **`<<extend>>`:**
    
    - Дополнительные действия, такие как просмотр информации о фильме или сеансах, расширяют основной сценарий выбора фильма. Эти действия необязательны, но полезны для пользователя.
2. **`<<include>>`:**
    
    - Выбор сеанса и мест обязателен для выполнения сценария покупки билета, так как они являются частью логического процесса бронирования.
  
---

**Вариант использования:** «Купить билет в онлайн-кинотеатре»  
**Описание:** Пользователь хочет приобрести билет на выбранный сеанс в онлайн-кинотеатре.  
**Предусловие:** Пользователь авторизован в системе и находится на странице выбора сеансов.

### Основной сценарий:
---
1. **Пользователь выбирает фильм из списка доступных.**
   
	- **Клиент:** Отправляет запрос на сервер для получения доступных сеансов.
    - **Сервер:**
        - Запрашивает список сеансов из базы данных.
        - Возвращает данные о доступных сеансах, включая дату, время и статус бронирования мест.
2. **Пользователь выбирает место.**
   
	- **Клиент:** Отправляет запрос на сервер с идентификатором выбранного сеанса.
    - **Сервер:**
        - Проверяет доступность мест в базе данных.
        - Возвращает карту зала с актуальным статусом мест (свободно/занято).
3. **Пользователь подтверждает выбор места.**
    
	- **Клиент:** Отправляет запрос на сервер с идентификатором сеанса и местом для предварительного бронирования.
    - **Сервер:**
        - Проверяет, что место доступно.
        - Создает временную запись в таблице бронирования с состоянием "в ожидании оплаты" и временным интервалом на завершение платежа.
        - Возвращает успешный ответ клиенту.
4. **Пользователь переходит к оплате.**
    
    - **Клиент:** Отправляет запрос на сервер для получения платежной формы.
    - **Сервер:**
        - Генерирует платежный токен через интеграцию с платежным провайдером.
        - Возвращает платежный шлюз клиенту.
5. **Пользователь вводит данные карты и завершает оплату.**
    
    - **Клиент:** Перенаправляет пользователя на страницу платежного провайдера.
    - **Сервер платежного провайдера:** Обрабатывает запрос, отправляет уведомление на сервер кинотеатра о статусе платежа.
6. **Сервер кинотеатра обрабатывает уведомление о платеже.**

    - **Платежный провайдер:** Отправляет запрос на сервер кинотеатра с результатом платежа.
    - **Сервер кинотеатра:**
        - Проверяет корректность данных уведомления (хэш, идентификатор транзакции, сумма).
        - Обновляет статус бронирования:
            - **Если оплата успешна:**
                - Меняет статус на «оплачено».
                - Изменяем поля билета, убираем его из доступных в сессии.
                - Сохраняем билет в таблице билетов кассы и отправляем пользователю.
            - **Если оплата неуспешна:**
                - Меняет статус на «истекло».
                - Освобождает место в таблице бронирования.
7. **Пользователь получает результат.**
    
    - **Клиент:** Отправляет запрос на сервер для проверки статуса бронирования .
    - **Сервер:**
        - Возвращает итоговый статус бронирования и, если оплата успешна, ссылку на билет.

---

### Альтернативный сценарий 1:

- Если пользователь не завершает оплату в течение установленного времени (например, 15 минут), сервер выполняет автоматическую отмену временного бронирования с помощью фоновой задачи.

### Альтернативный сценарий 2:

- Если пользователь хочет оплатить другим способом (например, через мобильный кошелек), он выбирает соответствующую опцию на шаге 4, после чего система перенаправляет его на страницу выбранного метода оплаты.

### Альтернативный сценарий 3: Пользователь отменяет выбор места до оплаты

1. Пользователь выбирает место и отправляет запрос на сервер для предварительного бронирования.
2. После этого пользователь решает отменить выбор места до завершения оплаты.
    - **Клиент:** Отправляет запрос на сервер для отмены бронирования.
    - **Сервер:**
        - Проверяет статус бронирования.
        - Обновляет его в базе данных на «отменено».
        - Освобождает место, возвращая его в доступные для других пользователей.

---

### Альтернативный сценарий 4: Сбой на стороне платежного провайдера

1. Пользователь переходит к оплате, вводит данные карты и подтверждает платеж.
2. Платежный провайдер возвращает сообщение об ошибке (например, проблемы с сетью или банковским шлюзом).
    - **Сервер кинотеатра:** Получает уведомление о неуспешной транзакции от провайдера.
        - Обновляет статус бронирования на «в ожидании».
        - Уведомляет клиента о необходимости повторить попытку оплаты.
3. Пользователь возвращается к шагу 4 основного сценария (выбор способа оплаты).

---

### Альтернативный сценарий 5: Место стало недоступно до подтверждения бронирования

1. Пользователь выбирает место в зале и отправляет запрос на сервер для предварительного бронирования.
2. Сервер проверяет статус места в базе данных и обнаруживает, что оно уже было забронировано другим пользователем.
    - **Сервер:** Возвращает ошибку с сообщением «Место недоступно» и обновленные данные о свободных местах в зале.
3. Пользователь выбирает другое место, повторяя шаг 2 основного сценария.


# Goodwin cinema

![Диаграммы_вариантов_использования-Goodwin Cinema drawio (2)](https://github.com/user-attachments/assets/46cfc667-3b61-4fcc-9ace-379860224764)

### Общая структура

### Основные участники:

1. **Администратор**:
    
    - Управляет контентом и данными системы через операции CRUD (создание, чтение, обновление, удаление).
    - Имеет доступ к следующим сущностям:
        - **Новости** (управление новостными статьями).
        - **Кинотеатр** (данные о филиалах и их характеристиках).
        - **Фильмы** (добавление, редактирование, удаление информации о фильмах).
        - **Сеансы** (управление расписанием и параметрами кинопоказов).
        - **Вопрос-ответ** (обратная связь с клиентами, ответы на вопросы).
        - **Вакансии** (объявления о рабочих местах).
        
2. **Гость** (включая зарегистрированного пользователя):
    
    - Может взаимодействовать с системой для получения информации и выполнения действий.

3. **Клиент (зарегистрированный пользователь)**:
    
    - Имеет доступ к тем же функциям, что и гость.
    - Дополнительно может оставлять рецензии и отзывы.
---

### Основные варианты использования:

1. **Изучить афишу**:
    
    - Включает просмотр расписания и доступ к информации о фильмах.
    - Расширяется вариантами:
        - **Найти фильм** – поиск нужного фильма.
        - **Определиться с сеансом** – выбор времени и формата кинопоказа.
        - **Посмотреть отзывы зрителей**, **Ознакомиться с информацией о фильме**, **Оценить рейтинг** – дополнительные действия для принятия решения.
2. **Выбрать место**:
    
    - Включает:
        - **Оплатить билет**:
            - Расширяется на два сценария: **Оплатить онлайн** и **Оплатить в кассе**.
        - **Вернуть билет** – возможность отмены покупки.
3. **Сменить кинотеатр (город)**:
    
    - Позволяет выбрать нужный филиал для получения локальной информации.
4. **Прочитать информацию**:
    
    - О кинотеатре.
    - О парке развлечений.
5. **Открыть схему проезда**:
    
    - Получение информации о местоположении кинотеатра.
6. **Проверить новости**:
    
    - Получение актуальных объявлений и событий.
7. **Посмотреть вакансии**:
    
    - Просмотр доступных рабочих мест.
8. **Обратиться в службу "Вопрос-ответ"**:
    
    - Расширяется вариантом **Заполнить форму** – обратная связь с администрацией кинотеатра.
9. **Оценить фильм**:
    
    - Возможность оставить отзыв или выставить рейтинг фильму.
10. **Исследовать справку**:
    
    - Доступ к информационным статьям или разделам для решения вопросов.


---


# FAKEL

![Диаграммы_вариантов_использования-Fakel drawio (2)](https://github.com/user-attachments/assets/148f89f3-f72d-448a-bf95-3192e53943b5)

> Сайт для Fakel, как более общего развлекательного центра, имеет сервис-боулинг, раздел «Детям» об игровых автоматах и ссылку «Репертуар на летние каникулы»; есть банкетный зал, а также возможности для корпоративного клиента; дано больше дополнительной информации («Рекламодателям», «Нормативные документы» и т.д.); представлено дублирование новостей о добавлении фильмов в афишу. В отличие от Goodwin Cinema, он не предлагает: регистрации, возврата билетов, демонстрации будущих фильмов, схемы проезда, справки и кнопки для перехода на мобильную версию.

### Участники и их роли:

#### 1. **Администратор**

- Администратор управляет системой и имеет доступ к функциям администрирования.
- Возможные действия (**варианты использования**):
    - **«CRUD» новости**: Создание, чтение, обновление и удаление новостей.
    - **«CRUD» фильм**: Управление фильмами в базе данных.
    - **«CRUD» сеанс**: Управление расписанием сеансов.
    - **«CRUD» корпоративное предложение**: Управление специальными предложениями для корпоративных клиентов.
    - **«CRUD» вакансии**: Управление вакансиями для персонала.
    - **«CRUD» отзыв, вопрос-ответ**: Обработка отзывов пользователей и раздела с вопросами.
    - **Написать отзыв**: Возможность оставлять отзывы о системе.

#### 2. **Гость**

- Гость — это пользователь, который не авторизован в системе. Его возможности ограничены:
    - **Посмотреть предложения**:
        - **Посмотреть анонсы**: Просмотр ближайших анонсов.
        - **Посмотреть афишу**: Просмотр всех фильмов, доступных в прокате.
        - **Просмотреть информацию о фильме**: Получение подробной информации о конкретном фильме.
        - **Просмотреть репертуар**: Изучение расписания сеансов.
    - **Выбрать сеанс**: Поиск и выбор сеанса для покупки билета.
    - **Оплатить билет**: Завершение процесса покупки.
    - **Сделать предзаказ**: Бронирование мест заранее.
    - **Посмотреть игры**: Возможность изучить игровые предложения (если предусмотрены).
    - **Найти фильм**:
        - **Ознакомиться с отзывами/рецензиями**: Просмотр пользовательских отзывов и рецензий.
        - **Оценить показ**: Оставить собственную оценку после просмотра.
        - **Просмотреть информацию о фильме**: Дополнительные сведения о фильме.
    - **Обратная связь**: Отправка сообщений или запросов администрации.

---

### Связи между вариантами использования:

1. **Расширение (extends)**:
    
    - Показывает дополнительные возможности, которые становятся доступными в определённых условиях.
        - «Посмотреть предложения» включает опции «Посмотреть анонсы», «Посмотреть афишу», «Просмотреть репертуар» и т. д.
        - «Найти фильм» включает «Ознакомиться с отзывами» и «Просмотреть информацию о фильме».
2. **Включение (includes)**:
    
    - Указывает на обязательное выполнение действия.
        - «Найти фильм» включает в себя «Просмотреть информацию о фильме».
---

**Итог:** Диаграмма иллюстрирует ключевые процессы, доступные Администратору и клиентам, выделяя различия в их правах и возможностях. Это помогает определить функциональные требования к системе и разграничить роли пользователей.


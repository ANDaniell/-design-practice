### Диаграмма деятельности
![Диаграммы_деятельности-Онлайн-покупка лицензии на фильм у поставщика drawio](https://github.com/user-attachments/assets/a2b742a0-b176-4a73-b970-c21acee78df7)

#### **Описание шагов**

1. **Выбрать фильм**  
    Пользователь начинает процесс с выбора конкретного фильма, для которого требуется лицензия.
    
2. **Проверка доступности лицензии**  
    Система проверяет, доступна ли лицензия на выбранный фильм:
    
    - Если лицензия недоступна, процесс завершается (отказ).
    - Если лицензия доступна, процесс продолжается.
3. **Указать тип лицензии**  
    Пользователь выбирает тип лицензии, соответствующий его потребностям (например, лицензия для домашнего просмотра, публичного показа и т.д.).
    
4. **Оформить заказ**  
    Система формирует заказ на основе выбранного фильма и типа лицензии.
    
5. **Оплатить заказ**  
    Пользователь производит оплату сформированного заказа.
    
6. **Проверка успешности оплаты**  
    Система проверяет, была ли произведена оплата:
    
    - Если оплата не была успешной, процесс завершается (отказ).
    - Если оплата успешна, процесс продолжается.
7. **Получить лицензию**  
    Пользователь получает доступ к лицензии, и процесс завершается.
    

---

#### **Условия и ветвления**

- **Проверка доступности лицензии**  
    Если лицензия недоступна, процесс прерывается, и пользователь не может продолжить.
    
- **Проверка успешности оплаты**  
    Если оплата неуспешна, заказ не подтверждается, и процесс завершен.
    

---

#### **Начальное и конечное состояние**

- **Начальное состояние**  
    Процесс начинается с шага выбора фильма.
    
- **Конечное состояние**  
    Процесс завершается либо успешным получением лицензии, либо отказом (при недоступности лицензии или неудачной оплате).

---
### Диаграмма состояний
![Диаграмма_состояний drawio](https://github.com/user-attachments/assets/2937167e-11ee-48dc-b1aa-a064a60d69d5)


### **Описание состояний**

1. **Создан (Created)**
    
    - Билет находится в системе, но пока не оплачен.
    - Входящее событие: оформление заказа.
    - Выходящее действие: ожидается оплата.
    - Возможные переходы:
        - В состояние **Отменён**, если пользователь отменяет заказ (до начала сеанса остается более 30 минут).
        - В состояние **Оплачен**, если произведена оплата.
2. **Оплачен (Paid)**
    
    - Билет успешно оплачен, информация отправлена клиенту.
    - Входящее событие: получение оплаты.
    - Выходящее действие: отправить билет покупателю.
    - Возможные переходы:
        - В состояние **Возвращён**, если оформлен возврат (до начала сеанса остается более 30 минут).
        - В состояние **Использован**, если билет предъявлен для входа на сеанс.
3. **Отменён (Cancelled)**
    
    - Билет аннулирован и более не доступен для использования.
    - Входящее событие: отмена заказа.
    - Выходящее действие: удалить или заархивировать информацию о билете.
    - Условие перехода: отмена возможна только если до начала сеанса осталось более 30 минут.
4. **Возвращён (Refunded)**
    
    - Билет возвращён, деньги возвращены клиенту.
    - Входящее событие: запрос на возврат.
    - Выходящее действие: вернуть средства пользователю.
    - Условие перехода: возврат возможен до начала сеанса (остается более 30 минут).
5. **Использован (Used)**
    
    - Билет предъявлен на входе и больше не может быть использован.
    - Входящее событие: билет отсканирован при входе в кинозал.
    - Выходящее действие: пометить билет как использованный в системе.

---

### **Описание переходов**

1. **Из "Создан" в "Оплачен"**
    
    - Триггер: оплата билета.
2. **Из "Создан" в "Отменён"**
    
    - Триггер: отмена заказа.
    - Условие: до начала сеанса более 30 минут.
3. **Из "Оплачен" в "Возвращён"**
    
    - Триггер: запрос на возврат.
    - Условие: до начала сеанса более 30 минут.
4. **Из "Оплачен" в "Использован"**
    
    - Триггер: билет предъявлен при входе.
5. **Из "Оплачен" или "Создан" в "Отменён"**
    
    - Триггер: отмена со стороны пользователя или системы (например, при ошибке).

---

### **Начальное и конечное состояния**

- Начальное состояние: "Создан".  
    Билет оформлен, но еще не оплачен.
    
- Конечные состояния:
    
    - "Использован" — билет реализован.
    - "Отменён" или "Возвращён" — билет более не доступен.

---
